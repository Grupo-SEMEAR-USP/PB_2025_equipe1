<launch>

  <arg name="color_width"   default="640"/>
  <arg name="color_height"  default="480"/>
  <arg name="color_fps"     default="15"/>

  <arg name="depth_width"   default="640"/>
  <arg name="depth_height"  default="480"/>
  <arg name="depth_fps"     default="15"/>
  
  <arg name="enable_accel"  default="true"/>
  <arg name="enable_gyro"   default="true"/>
  <arg name="enable_color"  default="true"/>
  <arg name="enable_depth"  default="true"/>
  
  <arg name="unite_imu_method" default="copy"/>
  <arg name="accel_fps"        default="63"/>
  <arg name="gyro_fps"         default="200"/>
  <arg name="initial_reset"    default="true"/>

  <include file="$(find realsense2_camera)/launch/rs_camera.launch">
    <arg name="color_width"    value="$(arg color_width)"/>
    <arg name="color_height"   value="$(arg color_height)"/>
    <arg name="color_fps"      value="$(arg color_fps)"/>
    
    <arg name="depth_width"    value="$(arg depth_width)"/>
    <arg name="depth_height"   value="$(arg depth_height)"/>
    <arg name="depth_fps"      value="$(arg depth_fps)"/>
    
    <arg name="enable_gyro"    value="$(arg enable_gyro)"/>
    <arg name="enable_accel"   value="$(arg enable_accel)"/>
    <arg name="enable_color"   value="$(arg enable_color)"/>
    <arg name="enable_depth"   value="$(arg enable_depth)"/>
    
    <arg name="accel_fps"      value="$(arg accel_fps)"/> 
    <arg name="gyro_fps"       value="$(arg gyro_fps)"/>

    <arg name="unite_imu_method" value="$(arg unite_imu_method)"/>
    <arg name="initial_reset"    value="$(arg initial_reset)"/> 
    
    <arg name="align_depth"    value="false"/> <arg name="enable_sync"    value="false"/> </include>

  <node pkg="imu_filter_madgwick" type="imu_filter_node" name="imu_filter_madgwick" output="screen" respawn="true">
      <param name="use_mag" value="false"/>
      <param name="publish_tf" value="false"/> 
      <param name="world_frame" value="enu"/>
      
      <remap from="/imu/data_raw" to="/camera/imu"/>
      <remap from="/imu/data" to="/imu/data_fused"/>
  </node>
  
  <include file="$(find robot_vision)/launch/vision.launch"/>
  <include file="$(find robot_communication)/launch/communication.launch"/>
  <include file="$(find robot_movement)/launch/movement.launch"/>

</launch>